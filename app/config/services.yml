services:

####  PUBLIC  ####
  public_user.registration.form.type:
    class: Application\Sonata\UserBundle\Form\Type\RegistrationFormType
    arguments: [%fos_user.model.user.class%]
    parent: fos_user.registration.form.type
    tags:
      - { name: form.type, alias: public_user_registration }

  public_user.profile.form.type:
    class: Application\Sonata\UserBundle\Form\Type\ProfileFormType
    arguments: [%fos_user.model.user.class%]
    tags:
      - { name: form.type, alias: public_user_profile }

  public_user.populate:
            class: Application\Sonata\UserBundle\Import\PopulateBD
            arguments: [@doctrine.orm.entity_manager]

####  ADMIN  ####
  sonata.admin.base:
    class: AppBundle\Admin\BaseAdmin
    tags:
        - name: sonata.admin
          manager_type: orm
          group: admin
          label: Bases
    arguments:
        - ~
        - Application\Sonata\UserBundle\Entity\Base
        - ~

  sonata.admin.campaign:
    class: AppBundle\Admin\CampaignAdmin
    tags:
      - name: sonata.admin
        manager_type: orm
        group: admin
        label: Campagnes
    arguments:
      - ~
      - Application\Sonata\UserBundle\Entity\Campaign
      - SonataAdminBundle:CRUD

####  RABBIT MQ EXCHANGE  ####
  db_sender:
    class: Application\Sonata\UserBundle\Match\dbSender
    arguments:
      - dbTarget
      - dbArray
      - @old_sound_rabbit_mq.db_sender_producer

  db_consumer:
    class: Application\Sonata\UserBundle\Match\dbConsumer